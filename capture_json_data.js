(function (a) { a.URL = a.URL || a.webkitURL; if (a.Blob && a.URL) { try { new Blob; return } catch (d) { } } var c = a.BlobBuilder || a.WebKitBlobBuilder || a.MozBlobBuilder || (function (p) { var g = function (z) { return Object.prototype.toString.call(z).match(/^\[object\s(.*)\]$/)[1] }, y = function m() { this.data = [] }, w = function i(B, z, A) { this.data = B; this.size = B.length; this.type = z; this.encoding = A }, q = y.prototype, v = w.prototype, s = p.FileReaderSync, e = function (z) { this.code = this[this.name = z] }, r = ("NOT_FOUND_ERR SECURITY_ERR ABORT_ERR NOT_READABLE_ERR ENCODING_ERR " + "NO_MODIFICATION_ALLOWED_ERR INVALID_STATE_ERR SYNTAX_ERR").split(" "), u = r.length, l = p.URL || p.webkitURL || p, t = l.createObjectURL, f = l.revokeObjectURL, k = l, o = p.btoa, j = p.atob, h = p.ArrayBuffer, n = p.Uint8Array, x = /^[\w-]+:\/*\[?[\w\.:-]+\]?(?::[0-9]+)?/; w.fake = v.fake = true; while (u--) { e.prototype[r[u]] = u + 1 } if (!l.createObjectURL) { k = p.URL = function (A) { var z = document.createElementNS("http://www.w3.org/1999/xhtml", "a"), B; z.href = A; if (!("origin" in z)) { if (z.protocol.toLowerCase() === "data:") { z.origin = null } else { B = A.match(x); z.origin = B && B[1] } } return z } } k.createObjectURL = function (A) { var B = A.type, z; if (B === null) { B = "application/octet-stream" } if (A instanceof w) { z = "data:" + B; if (A.encoding === "base64") { return z + ";base64," + A.data } else { if (A.encoding === "URI") { return z + "," + decodeURIComponent(A.data) } } if (o) { return z + ";base64," + o(A.data) } else { return z + "," + encodeURIComponent(A.data) } } else { if (t) { return t.call(l, A) } } }; k.revokeObjectURL = function (z) { if (z.substring(0, 5) !== "data:" && f) { f.call(l, z) } }; q.append = function (D) { var F = this.data; if (n && (D instanceof h || D instanceof n)) { var E = "", A = new n(D), B = 0, C = A.length; for (; B < C; B++) { E += String.fromCharCode(A[B]) } F.push(E) } else { if (g(D) === "Blob" || g(D) === "File") { if (s) { var z = new s; F.push(z.readAsBinaryString(D)) } else { throw new e("NOT_READABLE_ERR") } } else { if (D instanceof w) { if (D.encoding === "base64" && j) { F.push(j(D.data)) } else { if (D.encoding === "URI") { F.push(decodeURIComponent(D.data)) } else { if (D.encoding === "raw") { F.push(D.data) } } } } else { if (typeof D !== "string") { D += "" } F.push(unescape(encodeURIComponent(D))) } } } }; q.getBlob = function (z) { if (!arguments.length) { z = null } return new w(this.data.join(""), z, "raw") }; q.toString = function () { return "[object BlobBuilder]" }; v.slice = function (C, z, B) { var A = arguments.length; if (A < 3) { B = null } return new w(this.data.slice(C, A > 1 ? z : this.data.length), B, this.encoding) }; v.toString = function () { return "[object Blob]" }; v.close = function () { this.size = 0; delete this.data }; return y }(a)); a.Blob = function (j, h) { var l = h ? (h.type || "") : ""; var g = new c(); if (j) { for (var k = 0, e = j.length; k < e; k++) { if (Uint8Array && j[k] instanceof Uint8Array) { g.append(j[k].buffer) } else { g.append(j[k]) } } } var f = g.getBlob(l); if (!f.slice && f.webkitSlice) { f.slice = f.webkitSlice } return f }; var b = Object.getPrototypeOf || function (e) { return e.__proto__ }; a.Blob.prototype = b(new a.Blob()) }(typeof self !== "undefined" && self || typeof window !== "undefined" && window || this.content || this));
var saveAs = saveAs || function (e) { "use strict"; if (typeof e === "undefined" || typeof navigator !== "undefined" && /MSIE [1-9]\./.test(navigator.userAgent)) { return } var t = e.document, n = function () { return e.URL || e.webkitURL || e }, r = t.createElementNS("http://www.w3.org/1999/xhtml", "a"), o = "download" in r, a = function (e) { var t = new MouseEvent("click"); e.dispatchEvent(t) }, i = /constructor/i.test(e.HTMLElement) || e.safari, f = /CriOS\/[\d]+/.test(navigator.userAgent), u = function (t) { (e.setImmediate || e.setTimeout)(function () { throw t }, 0) }, s = "application/octet-stream", d = 1e3 * 40, c = function (e) { var t = function () { if (typeof e === "string") { n().revokeObjectURL(e) } else { e.remove() } }; setTimeout(t, d) }, l = function (e, t, n) { t = [].concat(t); var r = t.length; while (r--) { var o = e["on" + t[r]]; if (typeof o === "function") { try { o.call(e, n || e) } catch (a) { u(a) } } } }, p = function (e) { if (/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)) { return new Blob([String.fromCharCode(65279), e], { type: e.type }) } return e }, v = function (t, u, d) { if (!d) { t = p(t) } var v = this, w = t.type, m = w === s, y, h = function () { l(v, "writestart progress write writeend".split(" ")) }, S = function () { if ((f || m && i) && e.FileReader) { var r = new FileReader; r.onloadend = function () { var t = f ? r.result : r.result.replace(/^data:[^;]*;/, "data:attachment/file;"); var n = e.open(t, "_blank"); if (!n) e.location.href = t; t = undefined; v.readyState = v.DONE; h() }; r.readAsDataURL(t); v.readyState = v.INIT; return } if (!y) { y = n().createObjectURL(t) } if (m) { e.location.href = y } else { var o = e.open(y, "_blank"); if (!o) { e.location.href = y } } v.readyState = v.DONE; h(); c(y) }; v.readyState = v.INIT; if (o) { y = n().createObjectURL(t); setTimeout(function () { r.href = y; r.download = u; a(r); h(); c(y); v.readyState = v.DONE }); return } S() }, w = v.prototype, m = function (e, t, n) { return new v(e, t || e.name || "download", n) }; if (typeof navigator !== "undefined" && navigator.msSaveOrOpenBlob) { return function (e, t, n) { t = t || e.name || "download"; if (!n) { e = p(e) } return navigator.msSaveOrOpenBlob(e, t) } } w.abort = function () { }; w.readyState = w.INIT = 0; w.WRITING = 1; w.DONE = 2; w.error = w.onwritestart = w.onprogress = w.onwrite = w.onabort = w.onerror = w.onwriteend = null; return m }(typeof self !== "undefined" && self || typeof window !== "undefined" && window || this.content); if (typeof module !== "undefined" && module.exports) { module.exports.saveAs = saveAs } else if (typeof define !== "undefined" && define !== null && define.amd !== null) { define("FileSaver.js", function () { return saveAs }) }
/* icsFormatter
 * A json data generator
 * By Kizureina
 */
var fileGenerator = function () {
	'use strict';

	return {
		/**
		 * Download calendar using the saveAs function from filesave.js
		 * @param  {string} filename Filename
		 */
		'download': function (filename) {
			var courseJson = JSON.stringify(raw_data);
			if (courseJson) {
				var blob = new Blob([courseJson], { type: 'application/json' });
				saveAs(blob, filename + ".json");
			} else return false;
		}
	};
};

var semester = document.querySelector("#indexProjectForm > a:nth-child(9)").getInnerHTML();
var raw_data = table0;
window.icsObj = fileGenerator();
window.icsObj.download(semester);

